function format(n){for(var t=1;t<arguments.length;t++)n=n.replace("%"+(t-1),arguments[t]);return n}function CloudZoom(n,t){var i=$("img",n),v,y,r=null,f=null,u=null,o=null,e=null,s=null,h,d=0,c,l,g=0,nt=0,p=0,w=0,tt=0,b,k,a=this,it,rt;setTimeout(function(){if(f===null){var t=n.width();n.parent().append(format('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...<\/div>',t/3,t/2-t/6)).find(":last").css("opacity",.5)}},200);rt=function(){s!==null&&(s.remove(),s=null)};this.removeBits=function(){u&&(u.remove(),u=null);o&&(o.remove(),o=null);e&&(e.remove(),e=null);rt();$(".cloud-zoom-loading",n.parent()).remove()};this.destroy=function(){n.data("zoom",null);f&&(f.unbind(),f.remove(),f=null);r&&(r.remove(),r=null);this.removeBits()};this.fadedOut=function(){r&&(r.remove(),r=null);this.removeBits()};this.controlLoop=function(){if(u){var n=b-i.offset().left-c*.5>>0,f=k-i.offset().top-l*.5>>0;n<0?n=0:n>i.outerWidth()-c&&(n=i.outerWidth()-c);f<0?f=0:f>i.outerHeight()-l&&(f=i.outerHeight()-l);u.css({left:n,top:f});u.css("background-position",-n+"px "+-f+"px");g=n/i.outerWidth()*h.width>>0;nt=f/i.outerHeight()*h.height>>0;w+=(g-w)/t.smoothMove;p+=(nt-p)/t.smoothMove;r.css("background-position",-(w>>0)+"px "+(-(p>>0)+"px"))}d=setTimeout(function(){a.controlLoop()},30)};this.init2=function(n,t){tt++;t===1&&(h=n);tt===2&&this.init()};this.init=function(){$(".cloud-zoom-loading",n.parent()).remove();f=n.parent().append(format("<div class='mousetrap' style='background-image:url(\"http://wsstatic.mbaobao.com/v5/images/blank.png\");z-index:999;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'><\/div>",i.outerWidth(),i.outerHeight(),0,0)).find(":last");f.bind("mousemove",this,function(n){b=n.pageX;k=n.pageY});f.bind("click",this,function(){t.mouseTrapClick(h.src)});f.bind("mouseleave",this,function(){return clearTimeout(d),u&&u.fadeOut(299),o&&o.fadeOut(299),e&&e.fadeOut(299),r&&r.hide(),a.fadedOut(),$(".picture-zoom").text("鼠标移至图片上可看放大图片"),!1});f.bind("mouseenter",this,function(a){var v,tt;$(".picture-zoom").text("点击查看大图");b=a.pageX;k=a.pageY;it=a.data;r&&(r.stop(!0,!1),r.remove());var w=t.adjustX,d=t.adjustY,g=i.outerWidth(),nt=i.outerHeight(),y=t.zoomWidth,p=t.zoomHeight;t.zoomWidth=="auto"&&(y=g);t.zoomHeight=="auto"&&(p=nt);v=n.parent();switch(t.position){case"top":d-=p;break;case"right":w+=g;break;case"bottom":d+=nt;break;case"left":w-=y;break;case"inside":y=g;p=nt;break;default:v=$("#"+t.position);v.length?(y=v.innerWidth(),p=v.innerHeight()):(v=n,w+=g,d+=nt)}if(r=v.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:99;"><\/div>',w,d,y,p,h.src)).find(":last"),i.attr("title")&&t.showTitle&&r.append(format('<div class="cloud-zoom-title">%0<\/div>',i.attr("title"))).find(":last").css("opacity",t.titleOpacity),$.browser.msie&&$.browser.version<7&&(s=$('<iframe frameborder="0" src="#"><\/iframe>').css({position:"absolute",left:w,top:d,zIndex:99,width:y,height:p}).insertBefore(r)),r.fadeIn(500),u&&(u.remove(),u=null),c=i.outerWidth()/h.width*r.width(),l=i.outerHeight()/h.height*r.height(),c*l>=i.outerWidth()*i.outerHeight()){r&&(r.hide(),s&&(s.remove(),s=null));return}u=n.append(format("<div class = 'cloud-zoom-lens' style='display:none;z-index:56;position:absolute;width:%0px;height:%1px;'><\/div>",c,l)).find(":last");f.css("cursor","pointer");tt=!1;t.tint&&(u.css("background",'url("'+i.attr("src")+'")'),o=n.append(format('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',i.outerWidth(),i.outerHeight(),t.tint)).find(":last"),o.css("opacity",t.tintOpacity),tt=!0,o.fadeIn(500));t.softFocus&&(u.css("background",'url("'+i.attr("src")+'")'),e=n.append(format('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',i.outerWidth()-2,i.outerHeight()-2,t.tint)).find(":last"),e.css("background",'url("'+i.attr("src")+'")'),e.css("opacity",.5),tt=!0,e.fadeIn(500));tt||u.css("opacity",t.lensOpacity);t.position!=="inside"&&u.fadeIn(500);it.controlLoop();return})};v=new Image;$(v).load(function(){a.init2(this,0)});v.src=i.attr("src");y=new Image;$(y).load(function(){a.init2(this,1)});y.src=n.attr("href")}var gobal={},oxLazyloader;gobal.debug=!1;gobal.reqAjax=function(n){if(gobal.debug&&console.log(n.url,n),n.url==null||n.url.length==0){gobal.debug&&console.log("请求url地址有误！");return}$.ajax({url:n.url,data:n.data,type:n.type||"post",dataType:"json",timeout:n.timeout||3e4,beforeSend:function(){n.loading},success:function(t){gobal.debug&&console.log(n.url,t);n.callback&&n.callback(t,n.append)}})};gobal.queryString=function(n){var t=location.href,f=t.substring(t.indexOf("?")+1,t.length).split("&"),u={},r;for(i=0;j=f[i];i++)u[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);return r=u[n.toLowerCase()],typeof r=="undefined"?"":r};gobal.valid={required:function(n){return $.trim(n).length>0},speword:function(n){var t=["~","`","!","#","$","%","^","&","*","{","}","[","]","(",")"],i;for(t.push(":",";","'","|","\\","<",">","?","/","<<",">>","||","//"),t.push("admin","administrators","administrator","管理员","系统管理员"),t.push("select","delete","update","insert","create","drop","alter","trancate"),n=n.toLowerCase(),i=0;i<t.length;i++)if(n.indexOf(t[i])>=0)return!1;return!0},username:function(n){var t,i;if(!isNaN(n)||n.indexOf("@")>-1)return!1;for(t=["~","`","!","#","$","%","^","&","*","{","}","[","]","(",")"],t.push(":",";","'","|","\\","<",">","?","/","<<",">>","||","//"),t.push("admin","administrators","administrator","管理员","系统管理员"),t.push("select","delete","update","insert","create","drop","alter","trancate"),n=n.toLowerCase(),i=0;i<t.length;i++)if(n.indexOf(t[i])>=0)return!1;return!0},id:function(n){return/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/.test(n)||/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/.test(n)},numer:function(n){return/^-(\d*\.)?\d|(\d*\.)?\d+$/.test(n)},positive_number:function(n){return/^([0-9]*\.)?\d+$/.test(n)},positive_integer:function(n){return/^[0-9]*[1-9][0-9]*$/.test(n)},letter:function(n){return/^[a-z,A-Z]+$/.test(n)},range:function(n,t){var i=$.trim($(n).val()),r=t.replace("[","").replace("]","").split(",");return+i>=r[0]-0&&+i<=r[1]-0},rangelen:function(n,t){var i=$.trim($(n).val()),r=t.replace("[","").replace("]","").split(",");return i.length>=r[0]-0&&i.length<=r[1]-0},len:function(n,t){return $.trim($(n).val()).length==t},maxlen:function(n){return $.trim($(n).val()).length<=len},minlen:function(n,t){return $.trim($(n).val()).length>=t},max:function(n,t){var i=$(n).val();return+i<=+t},min:function(n,t){var i=$(n).val();return i>=+t},email:function(n){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)},equal:function(n,t){return $(n).val()==$(t).val()},mobile:function(n){return/^1[3|4|5|7|8]\d{9}$/.test(n)},phone:function(n){return/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(n)},password:function(n){return/^[a-z,A-Z,0-9]*$/.test(n)}};gobal.cartItemTemp=' <dd class="">                                        <div class="goods-item">                                            <div class="g-pic">                                                <a href="{prod-link}">                                                    <img src="{prod-img-src}@1e_1c_0o_0l_174h_174w_90q.src"                                                         alt="" width="50" height="50">                                                <\/a>                                            <\/div>                                            <div class="g-info">                                                <p class="name">                                                    <a href="{prod-link}">                                                        {prod-name}                                                    <\/a>                                                <\/p>                                                <p class="num-pos">{prod-qty}<\/p>                                                <p class="price-pos" data-price="{prod-price}">￥{prod-price}<\/p>                                                <p class="del-pos">                                                    <a href="javascript:void(0);"                                                       class="del" data-id="{prod-id}"                                                       data-goods-type="normal">[删除]<\/a>                                                <\/p>                                            <\/div>                                        <\/div>                                    <\/dd>';gobal.addItemToCart=function(n,t){var i=gobal.cartItemTemp;i=i.replace(/{prod-link}/g,"/good/GoodDetail/"+n.ProductGroupSysNo+"?skuId="+n.ProductSku.SysNo).replace(/{prod-img-src}/g,n.ProductSku.SkuImgUrl).replace(/{prod-name}/g,n.ProductGroup.ProductName).replace(/{prod-qty}/g,n.Quantity).replace(/{prod-price}/g,n.price).replace(/{prod-id}/g,n.SysNo);$("#cart-items dl").append(i);$("#cart-items dl dd:last").hover(function(){$(this).addClass("over")},function(){$(this).removeClass("over")});$("#cart-items dl dd:last").find("a.del").click(function(){t&&t(this)});gobal.calcCart()};gobal.removeCartItem=function(n){var t=$(n).closest("dd");t.remove();gobal.calcCart()};gobal.calcCart=function(){var t=0,n=0;$("#cart-items dd").each(function(){var i=$(this),u=i.find(".price-pos").data("price")-0,r=i.find(".num-pos").text()-0;t+=u*r;n+=r});$("#cart-items .cart-total .price strong").text(t.toFixed(2));$("#cart-items .cart-total .red").text(n);$("#js-total-num").text(n);n==0&&($(".min-cart-empty").show(),$("#cart-items").hide())};$.fn.CloudZoom=function(n){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}return this.each(function(){var i,t;eval("var a = {"+$(this).attr("rel")+"}");i=a;$(this).is(".cloud-zoom")?($(this).css({position:"relative",display:"block"}),$("img",$(this)).css({display:"block"}),$(this).parent().attr("id")!="wrap"&&$(this).wrap('<div id="wrap" style="top:0px;z-index:56;position:relative;"><\/div>'),t=$.extend({},$.fn.CloudZoom.defaults,n),t=$.extend({},t,i),$(this).data("zoom",new CloudZoom($(this),t))):$(this).is(".cloud-zoom-gallery")&&(t=$.extend({},i,n),$(this).data("relOpts",t),$(this).bind("mouseover",$(this),function(t){var i=t.data.data("relOpts");return $("#"+i.useZoom).data("zoom").destroy(),$("#"+i.useZoom).attr("href",t.data.attr("href")),$("#"+i.useZoom+" img").attr("src",t.data.data("relOpts").smallImage),$("#"+t.data.data("relOpts").useZoom).CloudZoom(n),!1}))}),this};$.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:.5,lensOpacity:.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:.5,adjustX:0,adjustY:0,mouseTrapClick:function(){}};oxLazyloader=function(n){this.options=$.extend({},oxLazyloader.defaults,n);this._init()};oxLazyloader.prototype={constructor:"oxLazyloader",_init:function(){var n=this.options;(this.container=n.container&&$(n.container).length!==0?$(n.container):$(document),n.dynamic||(this._filterItems(),this.imgLazyItems.length!==0||this.moduleLazyItems.length!==0||this.bgLazyItems.length!==0))&&(this._bindEvent(),this._loadItems())},_filterItems:function(){var n=this.options;this.bgLazyItems=this.container.find("["+n.bgLazyAttr+"]");this.imgLazyItems=this.container.find("["+n.imgLazyAttr+"]");this.moduleLazyItems=this.container.find("["+n.moduleLazyAttr+"]")},_bindEvent:function(){var n=this;this._loadFn=function(){n._loadItems()};$(window).bind("resize."+this.constructor+" scroll."+this.constructor,this._loadFn)},_loadItems:function(){var n=this.options,t=this;n.dynamic&&this._filterItems();this._loadBgItems();this._loadImgItems();this._loadModuleItems();n.dynamic||(this._filterItems(),this.bgLazyItems===0&&this.imgLazyItems.length===0&&this.moduleLazyItems.length===0&&n.autoDestroy&&t.destroy())},_loadBgItems:function(){var t=this.options,i=this,n=t.bgLazyAttr,r=this.bgLazyItems;$.each(r,function(){var t=$(this),r;i._isInViewport(t)&&(r=t.attr(n),t.css("background-image","url("+r+")").removeAttr(n))})},_loadImgItems:function(){var t=this.options,i=this,n=t.imgLazyAttr,r=this.imgLazyItems;$.each(r,function(){var t=$(this),r;i._isInViewport(t)&&(r=t.attr(n),t.attr("src",r).removeAttr(n))})},_loadModuleItems:function(n){var r=this.options,u=this,t=r.moduleLazyAttr,i=r.moduleLoadCallback,f=this.moduleLazyItems;n?$.each(f,function(){var r=$(this),f=r.attr(t);f==n&&u._isInViewport(r)&&(r.removeAttr(t),typeof i=="function"&&i(f,r))}):$.each(f,function(){var n=$(this),r;u._isInViewport(n)&&(r=n.attr(t),n.removeAttr(t),typeof i=="function"&&i(r,n))})},_isInViewport:function(n){var t=$(window),i=t.scrollTop(),r=isNaN(n.data("threshold"))?this.options.threshold:n.data("threshold"),f=i+t.height()+r,e=i-r,u=n.offset().top,o=u+n.outerHeight();return u>f||o<e?!1:!0},destroy:function(){$(window).unbind("resize."+this.constructor+" scroll."+this.constructor,this._loadFn)}};oxLazyloader.toLazyloadHtml=function(n,t,i){var r;return t=t||this.defaults.imgLazyAttr,i=i||this.defaults.placeholder,r=/(<img.*?)src=["']([^"']+)["'](.*?>)/gi,n.replace(r,'$1src="'+i+'" '+t+'="$2" $3')};oxLazyloader.defaults={container:"document",placeholder:"http://wsstatic.mbaobao.com/v5/images/blank.png",bgLazyAttr:"data-oxlazy-bg",imgLazyAttr:"data-oxlazy-img",moduleLazyAttr:"data-oxlazy-module",autoDestroy:!0,dynamic:!1,threshold:100,moduleLoadCallback:null};$(function(){$("#js-min-cart").hover(function(){$(this).addClass("over-min-cart")},function(){$(this).removeClass("over-min-cart")});$("#j_menu_tree").hover(function(){$(this).addClass("over-dropdown")},function(){$(this).removeClass("over-dropdown")});$("#category_list,.all-catalog .all-btn").hover(function(){$("#category_list").show()},function(){$("#category_list").hide()});$("#category_list .cata-group").hover(function(){$(this).addClass("over-group")},function(){$(this).removeClass("over-group")});$(".fb-side a").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});$(window).scroll(function(){var n=$(this).scrollTop();n>800?$(".gotop").fadeIn():$(".gotop").fadeOut()});$(window).resize(function(){var n=window.innerWidth;n<925?$(".fb-side").addClass("fb-side-min"):$(".fb-side").removeClass("fb-side-min")});$(".gotop").click(function(){$("html,body").scrollTop(0)})});$("#js-search-key").focusin(function(){$(".input-placeholder").hide()}).focusout(function(){$(this).val()==""&&$(".input-placeholder").show()});